import{_ as e,c as a,E as l,b2 as t,l as r}from"./main-UPGOfi6h.js";import{a as o,b as s}from"./support-COLyuSZO.js";import{r as i,a as n,w as d,I as u,J as p,R as c,M as b,j as m,x as T,O as v,u as C,b as R,z as P,K as f,s as _,L as g,f as E}from"./vue-vendor-dpeM2kxB.js";import"./utils-vendor-Bv3pXXA2.js";import"./vant-vendor-CCYRvjqt.js";import"./pdfh5-DcFc6bYW.js";const S=e({__name:"FormDialog",props:{visible:{type:Boolean,default:!1}},emits:["update:visible","refresh"],setup(e,{emit:t}){const{t:r}=a(),s=e,R=t,P=i(!1),f=i(null),_=n({describe:""}),g=()=>{f.value&&f.value.resetFields()};d((()=>s.visible),(e=>{P.value=e,!1===e&&g()}),{immediate:!0}),d((()=>P.value),(e=>{e!==s.visible&&R("update:visible",e)}));const E={describe:[{required:!0,message:r("PC.PROP_TRADER.TICKETS.describe"),trigger:"blur"}]},S=()=>{g(),P.value=!1},h=i(!1);return(e,a)=>{const t=u("el-input"),s=u("el-form-item"),i=u("el-form"),n=u("el-button"),d=u("el-dialog");return p(),c(d,{modelValue:P.value,"onUpdate:modelValue":a[3]||(a[3]=e=>P.value=e),title:C(r)("PC.PROP_TRADER.TICKETS.ADD_TICKET"),width:"500px",center:"","destroy-on-close":"","append-to-body":""},{footer:b((()=>[m(n,{onClick:a[1]||(a[1]=e=>S())},{default:b((()=>[T(v(e.$t("BUTTONS.CANCEL")),1)])),_:1}),m(n,{type:"primary",loading:h.value,onClick:a[2]||(a[2]=e=>(async()=>{if(f.value)try{await f.value.validate(),h.value=!0,await o({describe:_.describe}),l.success(r("PC.PROP_TRADER.TICKETS.SUCCESS")),R("refresh"),S()}catch(e){e.message&&l.error(e.message)}finally{h.value=!1}})())},{default:b((()=>[T(v(e.$t("BUTTONS.SUBMIT")),1)])),_:1},8,["loading"])])),default:b((()=>[m(i,{ref_key:"formRef",ref:f,size:"large",model:C(_),rules:E,"label-width":"auto","label-position":"top"},{default:b((()=>[m(s,{label:C(r)("PC.PROP_TRADER.TICKETS.describe"),prop:"describe"},{default:b((()=>[m(t,{modelValue:C(_).describe,"onUpdate:modelValue":a[0]||(a[0]=e=>C(_).describe=e),clearable:"",placeholder:C(r)("PC.PROP_TRADER.TICKETS.describe"),type:"textarea",rows:4},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["modelValue","title"])}}},[["__scopeId","data-v-422ecbe0"]]),h={class:"ticket-con"},y={style:{padding:"12px 0"}},w={class:"footer"},D=e({__name:"index",setup(e){const a=i({total:0,current:1,pageSize:10}),l=i([]),o=async()=>{const e=await s({page:a.value.current,limit:a.value.pageSize});a.value.total=e.dataCount,l.value=e.data},n=i(!1),d=()=>{n.value=!0};return R((()=>{o()})),(e,s)=>{const i=u("el-icon"),R=u("el-button"),D=u("el-empty"),I=u("el-table-column"),O=u("el-table"),A=u("el-pagination"),K=u("el-card"),k=P("el-loading");return p(),f("div",h,[_((p(),c(K,{class:"dark-card"},{default:b((()=>[g("div",y,[m(R,{type:"primary",onClick:d},{default:b((()=>[m(i,null,{default:b((()=>[m(C(t))])),_:1}),T(v(e.$t("PC.PROP_TRADER.TICKETS.ADD_TICKET")),1)])),_:1})]),m(O,{data:C(l)},{empty:b((()=>[m(D,{description:C(r)("COMMON.NO_DATA")},null,8,["description"])])),default:b((()=>[m(I,{prop:"requestNo",label:C(r)("PC.PROP_TRADER.TICKETS.requestNo"),"min-width":"120"},null,8,["label"]),m(I,{prop:"describe",label:C(r)("PC.PROP_TRADER.TICKETS.describe"),"min-width":"120","show-overflow-tooltip":""},null,8,["label"]),m(I,{prop:"replyContent",label:C(r)("PC.PROP_TRADER.TICKETS.replyContent"),"min-width":"120","show-overflow-tooltip":""},null,8,["label"]),m(I,{prop:"state",label:C(r)("PC.PROP_TRADER.TICKETS.state"),"min-width":"120"},{default:b((e=>[T(v(e.row.stateStr),1)])),_:1},8,["label"]),m(I,{prop:"createTime",label:C(r)("PC.PROP_TRADER.TICKETS.createTime"),"min-width":"120"},null,8,["label"])])),_:1},8,["data"]),g("div",w,[m(A,{class:"footer-pagination",layout:"prev, pager, next",total:C(a).total,"page-size":C(a).pageSize,"current-page":C(a).current,"onUpdate:currentPage":s[0]||(s[0]=e=>C(a).current=e),onCurrentChange:e.fetchCoupons},null,8,["total","page-size","current-page","onCurrentChange"])]),m(S,{visible:C(n),"onUpdate:visible":s[1]||(s[1]=e=>E(n)?n.value=e:null),onRefresh:o},null,8,["visible"])])),_:1})),[[k,{show:e.bankLoading,background:"rgba(0, 0, 0, 0.7)"}]])])}}},[["__scopeId","data-v-4261797b"]]);export{D as default};
