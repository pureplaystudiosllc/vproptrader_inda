import{S as e,Q as a,c as s,b as t,l,J as o,K as n,L as c,j as i,M as r,u,x as d,O as v,a1 as m}from"./vue-vendor-dpeM2kxB.js";import{_ as f,c as p,bc as I,bd as _,be as h,aS as g,bf as y}from"./main-UPGOfi6h.js";import"./utils-vendor-Bv3pXXA2.js";import"./vant-vendor-CCYRvjqt.js";import"./pdfh5-DcFc6bYW.js";const C={class:"pc-origin-iframe"},E={class:"iframe-container"},b={class:"page-header"},O={class:"page-title"},A=["src"],R={key:1,class:"no-link-message"},N=f(Object.assign({name:"PCOriginIframe"},{__name:"index",setup(f){const N=e(),k=a(),{t:w}=p(),L=s((()=>{const e=T.value.includes("pay");return{backgroundColor:e?"#f8f9fa":"#fff",title:e?N.query.title||w("BACK_ORIGIN_IFRAME_KEYS.PAY_TITLE"):N.query.title}})),M=s((()=>L.value.title||"Payment")),T=s((()=>N.query.link?decodeURIComponent(N.query.link):"")),j=s((()=>L.value.backgroundColor)),x=s((()=>N.query.key)),B=e=>{var a,s,t;if((null==(a=e.data)?void 0:a.type)===_.NAVIGATE_TO_ROUTE)k.push({name:e.data.route});else if((null==(s=e.data)?void 0:s.type)===_.NAVIGATE_BACK){const a=e.data.steps||-1;k.go(a)}else if((null==(t=e.data)?void 0:t.type)===_.REQUEST_LOCALE){const e=h(),a=document.querySelector("iframe");a&&a.contentWindow&&a.contentWindow.postMessage({type:_.SEND_LOCALE,locale:e},"*")}},F=()=>{};t((()=>{window.addEventListener("message",B)})),l((()=>{window.removeEventListener("message",B)}));const G=()=>{x.value&&Object.values(g).includes(x.value)?y.confirm(w(`ORIGIN_IFRAME.CONFIRM.${x.value}`),"",{confirmButtonText:w("ORIGIN_IFRAME.CONFIRM_BTN"),cancelButtonText:w("ORIGIN_IFRAME.CANCEL"),type:"warning",customClass:"pc-origin-iframe-confirm"}).then((()=>{S()})).catch((()=>{})):k.back()},S=()=>{const e=N.fullPath,a=T.value;k.back(),setTimeout((()=>{N.fullPath===e&&T.value===a&&S()}),100)};return(e,a)=>(o(),n("div",C,[c("div",E,[c("div",b,[c("h1",O,[i(u(I),{class:"title-icon back-icon",onClick:G},{default:r((()=>a[0]||(a[0]=[c("svg",{viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor"},[c("path",{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"})],-1)]))),_:1}),d(" "+v(M.value),1)])]),c("div",{class:"iframe-content",style:m({backgroundColor:j.value})},[T.value?(o(),n("iframe",{key:0,src:T.value,frameborder:"0",class:"payment-iframe",onLoad:F},null,40,A)):(o(),n("div",R,[i(u(I),{size:"48",color:"#ccc"},{default:r((()=>a[1]||(a[1]=[c("svg",{viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor"},[c("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 0 1 0-96 48.01 48.01 0 0 1 0 96z"})],-1)]))),_:1}),c("p",null,v(u(w)("ORIGIN_IFRAME.NO_LINK")),1)]))],4)])]))}}),[["__scopeId","data-v-70000bda"]]);export{N as default};
