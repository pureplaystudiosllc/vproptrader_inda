import{r as e,Q as a,a2 as t,w as l,I as o,z as u,J as n,K as s,L as r,O as d,j as c,M as i,u as m,F as v,P as p,R,U as P,s as A,x as D}from"./vue-vendor-dpeM2kxB.js";import{_ as g,c as y,aw as h,aT as T,c3 as f,bf as _,R as I,c4 as w,c5 as b,E}from"./main-UPGOfi6h.js";import"./utils-vendor-Bv3pXXA2.js";import"./vant-vendor-CCYRvjqt.js";import"./pdfh5-DcFc6bYW.js";const U={class:"page-container"},O={class:"page-title"},N={class:"page-content"},F={class:"option-header"},C={class:"header-tag"},W={key:0},S={class:"header-account"},x={style:{display:"flex","align-items":"center",width:"100%"}},k={class:"real-amount"},H={style:{lineHeight:"40px",marginBottom:8}},B={style:{"margin-bottom":"24px"}},j={style:{lineHeight:"40px",marginBottom:8}},V={style:{"margin-bottom":"24px"}},$={key:0,style:{color:"var(--el-color-error)","margin-bottom":"24px"}},q=g({__name:"index",setup(g){const{t:q}=y(),M=e([]),z=a(),J=e(0);(async()=>{var e;try{const{data:t}=await f();if(!(null==t?void 0:t.length))return void _.alert(q("PC.PROP_TRADER.FUND.WITHDRAW.TIP"),"TIP",{confirmButtonText:q("PC.PROP_TRADER.FUND.WITHDRAW.goBind"),callback:()=>{z.push({name:I.PC.PROP_TRADER_INFO_PC,query:{type:"bank"}})}});M.value=t||[];try{const a=await w();J.value=(null==(e=null==a?void 0:a.data)?void 0:e.fee)??0}catch(a){J.value=0}}catch(t){}})();const K=e(),L=e({withdrawAccountId:null,usdtAmount:null}),Q=e({usdtAmount:[{type:"number",required:!0,trigger:["blur","change"],message:q("PC.PROP_TRADER.FUND.DEPOSIT.usdtAmount")}],withdrawAccountId:[{required:!0,trigger:["blur","change"],message:q("PC.PROP_TRADER.FUND.WITHDRAW.account")}]}),G=e({}),X=async()=>{G.value=M.value.find((e=>e.id===L.value.withdrawAccountId))},Y=h(),{actualAmount:Z,loading:ee}=t(Y);l([()=>{var e;return null==(e=G.value)?void 0:e.currency},()=>L.value.usdtAmount],(()=>{var e,a,t;(0===(null==(e=G.value)?void 0:e.currency)||(null==(a=G.value)?void 0:a.currency))&&L.value.usdtAmount&&Y.fetchActualAmount({currency:null==(t=G.value)?void 0:t.currency,amount:L.value.usdtAmount+"",type:0})}));const ae=T(),te=e(!1);return(e,a)=>{const t=o("el-option"),l=o("el-select"),g=o("el-form-item"),y=o("el-input-number"),h=o("el-button"),T=o("el-form"),f=u("el-loading");return n(),s("div",U,[r("div",O,[r("span",null,d(e.$t("PC.MENU.FUND_WITHDRAW")),1)]),r("div",N,[c(T,{ref_key:"formRef",ref:K,size:"large",model:m(L),rules:m(Q),"label-width":"auto","label-position":"top",class:"form-con"},{default:i((()=>{var o,u;return[c(g,{label:m(q)("PC.PROP_TRADER.FUND.WITHDRAW.account"),prop:"withdrawAccountId"},{default:i((()=>[c(l,{modelValue:m(L).withdrawAccountId,"onUpdate:modelValue":a[0]||(a[0]=e=>m(L).withdrawAccountId=e),clearable:"",placeholder:m(q)("PC.PROP_TRADER.FUND.WITHDRAW.account"),"popper-class":"withdraw-select",onChange:X},{default:i((()=>[(n(!0),s(v,null,p(m(M),(e=>(n(),R(t,{key:e.id,label:0===e.type?e.usdtUrl:e.accountNo,value:e.id,disabled:0===e.state,class:"withdraw-option"},{default:i((()=>[r("div",null,[r("div",F,[r("span",C,d(e.typeStr),1),1===e.type?(n(),s("span",W,d(e.bankName),1)):P("",!0)]),r("div",S,d(0===e.type?e.usdtUrl:e.accountNo),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","placeholder"])])),_:1},8,["label"]),c(g,{label:m(q)("PC.PROP_TRADER.FUND.DEPOSIT.usdtAmount"),prop:"usdtAmount"},{default:i((()=>[r("div",x,[c(y,{modelValue:m(L).usdtAmount,"onUpdate:modelValue":a[1]||(a[1]=e=>m(L).usdtAmount=e),style:{flex:"1"},"controls-position":"right",placeholder:m(q)("PC.PROP_TRADER.FUND.DEPOSIT.usdtAmount")},null,8,["modelValue","placeholder"]),a[4]||(a[4]=r("span",{style:{"margin-left":"5px"}},"USD",-1))])])),_:1},8,["label"]),A((n(),s("div",k,[r("div",H,d(e.$t("PC.PROP_TRADER.FUND.DEPOSIT.exchangeRate")),1),r("div",B,d((null==(o=m(G))?void 0:o.exchangeRate)||1),1),r("div",j,d(e.$t("PC.PROP_TRADER.FUND.DEPOSIT.realAmount")),1),r("div",V,d(m(Z)||"--")+" "+d(null==(u=m(G))?void 0:u.currencyStr),1),m(J)>0?(n(),s("div",$,d(m(q)("ADD_WITHDRAW_FUNDS.WITHDRAW_FEE",{withdrawFee:m(J)})),1)):P("",!0)])),[[f,{show:m(ee),height:"100%",background:"rgba(0, 0, 0, 0.3)"}]]),c(g,{label:" "},{default:i((()=>[c(h,{onClick:a[2]||(a[2]=e=>{K.value.resetFields()})},{default:i((()=>[D(d(e.$t("BUTTONS.RESET")),1)])),_:1}),c(h,{type:"primary",loading:m(te),onClick:a[3]||(a[3]=e=>(async()=>{var e;if(!(await K.value.validate()))return!1;try{te.value=!0,localStorage.setItem("pages.deposit.html","");const{code:a,data:t}=await b({...L.value,currency:(null==(e=G.value)?void 0:e.currency)||0});if("0000"!==a)return;E.success(q("PC.PROP_TRADER.FUND.DEPOSIT.success")),K.value.resetFields(),ae.getUserInfo()}catch(a){E.error(a.message)}finally{te.value=!1}})())},{default:i((()=>[D(d(e.$t("BUTTONS.SUBMIT")),1)])),_:1},8,["loading"])])),_:1})]})),_:1},8,["model","rules"])])])}}},[["__scopeId","data-v-d0567499"]]);export{q as default};
