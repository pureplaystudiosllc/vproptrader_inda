import{c as a,r as e,w as t,I as l,z as s,J as o,R as n,M as i,L as r,j as c,x as d,O as u,u as v,s as T,Q as p,S as A,a2 as E,b as _,K as m,W as g,U as f,N as O,F as P}from"./vue-vendor-dpeM2kxB.js";import{_ as C,c as R,V as I,W as S,X as b,ao as y,Y as L,E as h,ap as U,R as w,aq as D,ar as N,f as Y,as as k}from"./main-UPGOfi6h.js";import"./utils-vendor-Bv3pXXA2.js";import"./vant-vendor-CCYRvjqt.js";import"./pdfh5-DcFc6bYW.js";const M={class:"certificate-container"},B={class:"bg-wrapper"},x={class:"dialog-content"},V={class:"header"},F={class:"reward"},$={class:"info-con"},j={class:"info-text"},q={class:"title"},z={class:"name"},W={class:"title"},G={class:"price"},H={class:"info-erwei"},Q={class:"info-footer"},X={class:"footer-item"},J={class:"footer-text"},K={class:"footer-title"},Z={class:"footer-item"},aa={class:"footer-text ceo"},ea={class:"dialog-footer"},ta=C({__name:"DetailDialog",props:{open:{type:Boolean,required:!0},data:{type:Object,required:!0}},emits:["update:open"],setup(p,{emit:A}){const E=p,_=A,m=a({get:()=>E.open,set:a=>_("update:open",a)}),{t:g}=R(),f=e({}),O=e(!1);t((()=>E.open),(a=>{a&&(async()=>{try{const{data:a}=await y({id:E.data.id});if("0000"!==a.code)return;f.value=a.data}catch(a){}})()}));const P=a((()=>"https://vproptrader.com/")),C=a((()=>{let a=f.value.payoutDate;if(a)try{const e=new Date(a);if(!isNaN(e.getTime())){const a=String(e.getDate()).padStart(2,"0"),t=e.toLocaleString("en-US",{month:"short"});return`${a} ${t} ${e.getFullYear()}`}}catch(t){}const e=new Date;return`${String(e.getDate()).padStart(2,"0")} ${e.toLocaleString("en-US",{month:"short"})} ${e.getFullYear()}`})),U=e(!1),w=e(null),D=()=>{O.value=!0},N=async()=>{if(!U.value)try{if(U.value=!0,await new Promise((a=>setTimeout(a,1e3))),!w.value)return;const a=(await L(w.value,{useCORS:!0,scale:2,backgroundColor:null})).toDataURL("image/png");if(navigator.userAgent.match(/mobile/i)){const e=document.createElement("a");e.href=a,e.download="vebson-certification.png",e.click()}else{const e=document.createElement("a");e.href=a,e.download="vebson-certification.png",document.body.appendChild(e),e.click(),document.body.removeChild(e)}h.success(g("COMMON.SAVE_SUCCESS"))}catch(a){h.error(g("COMMON.SAVE_FAILED"))}finally{U.value=!1}},Y=()=>{m.value=!1};return(a,e)=>{const t=l("el-button"),p=l("el-dialog"),A=s("loading");return o(),n(p,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=a=>m.value=a),width:"600px","before-close":Y,"append-to-body":"",class:"detail-modal","align-center":!0,"modal-class":"default-modal"},{footer:i((()=>[r("span",ea,[c(t,{onClick:Y},{default:i((()=>[d(u(v(g)("BUTTONS.CANCEL")),1)])),_:1}),c(t,{type:"primary",loading:U.value,onClick:N},{default:i((()=>[d(u(v(g)("CERTIFICATE.DIALOG.SAVE_THIS_PICTURE")),1)])),_:1},8,["loading"])])])),default:i((()=>[r("div",M,[r("div",{class:"detail-content",ref_key:"contentRef",ref:w},[r("div",B,[T(r("img",{class:"bg-img",src:I,onLoad:D},null,544),[[A,!O.value]]),r("div",x,[r("div",V,[r("div",F,u(v(g)("ME.TRANSACTION_LIST.LABELS.CERTIFICATE.REWARD")),1)]),r("div",$,[r("div",j,[r("div",q,u(v(g)("ME.TRANSACTION_LIST.LABELS.CERTIFICATE.PRESENTED_TO"))+": ",1),r("div",z,u(f.value.userName),1),r("div",W,u(v(g)("ME.TRANSACTION_LIST.LABELS.CERTIFICATE.YOUR_REWARD")),1),r("div",G,"$"+u(f.value.amount),1)]),r("div",H,[c(S,{value:P.value,size:70,level:"H","render-as":"svg",class:"erwei-qrcode"},null,8,["value"]),e[1]||(e[1]=r("img",{class:"qrcode-logo",src:b,alt:"V"},null,-1))])]),r("div",Q,[r("div",X,[r("div",J,u(C.value),1),r("div",K,u(v(g)("ME.TRANSACTION_LIST.LABELS.CERTIFICATE.DATE")),1)]),r("div",Z,[r("div",aa,u(f.value.ceoName),1),e[2]||(e[2]=r("div",{class:"footer-title"},"CEO",-1))])])])])],512)])])),_:1},8,["modelValue"])}}},[["__scopeId","data-v-6bd2f743"]]),la={class:"prop-trader-pay-out"},sa={key:0,class:"pay-out-container"},oa={class:"page-header"},na={class:"page-title"},ia={class:"page-description"},ra={class:"sub-title"},ca={class:"description-text"},da={class:"pay-out-table-wrapper"},ua={class:"login-cell"},va={class:"type-cell"},Ta={class:"amount-cell"},pa={class:"state-cell"},Aa={class:"create-time-cell"},Ea={key:0,class:"pagination-wrapper"},_a=C(Object.assign({name:"PropTraderPayOut"},{__name:"index",setup(C){const I=p(),S=A(),{t:b}=R(),y=U(),{loading:L}=E(y),M=e(1),B=e(10),x=a((()=>L.value)),V=e([]),F=e(0);t((()=>S.query.refresh),(a=>{a&&S.name===w.PC.PROP_TRADER_PAY_OUT&&(M.value=1,$(1),I.replace({name:w.PC.PROP_TRADER_PAY_OUT}))}));const $=async(a=1)=>{try{const e=await y.fetchWithdrawLog({page:a,limit:B.value});V.value=e.data,F.value=e.dataCount}catch(e){}},j=a=>{M.value=a,$(a)},q=e(!1),z=e({}),W=e(!1),G=e(!1),H=async()=>{if(!G.value){Y._trackPayoutRequest(),G.value=!0;try{const a=await k();if(0===(a.data||[]).length)return void(W.value=!0);I.push({name:w.PC.REQUEST_PAYOUT})}catch(a){h.error(b("ME.PAY_OUT.MESSAGES.ERROR")||"获取可提现账户失败"),W.value=!0}finally{G.value=!1}}},Q=()=>{Y._trackPayoutStartChallenge(),I.push({name:w.PC.ADD_CHALLENGE}),W.value=!1},X=()=>{Y._trackPayoutClose()};return _((()=>{$()})),(a,e)=>{const t=l("router-view"),p=l("el-icon"),A=l("el-button"),E=l("el-table-column"),_=l("el-table"),C=l("el-pagination"),R=s("el-loading");return o(),m(P,null,[r("div",la,[c(t,null,{default:i((({Component:a})=>[a?(o(),n(g(a),{key:0})):f("",!0)])),_:1}),a.$route.name===v(w).PC.PROP_TRADER_PAY_OUT?(o(),m("div",sa,[r("div",oa,[r("h1",na,u(v(b)("PC.PROP_TRADER.PAY_OUT.TITLE")),1),r("div",ia,[r("h2",ra,u(v(b)("PC.PROP_TRADER.PAY_OUT.SUBTITLE")),1),r("p",ca,u(v(b)("PC.PROP_TRADER.PAY_OUT.DESCRIPTION")),1),c(A,{type:"primary",size:"large",class:"request-payout-btn",loading:G.value,onClick:H},{default:i((()=>[c(p,null,{default:i((()=>[c(v(D))])),_:1}),d(" "+u(v(b)("PC.PROP_TRADER.PAY_OUT.REQUEST_PAYOUT")),1)])),_:1},8,["loading"])])]),r("div",da,[T((o(),n(_,{data:V.value,class:"pay-out-table","header-cell-class-name":"table-header-cell","cell-class-name":"table-cell"},{default:i((()=>[c(E,{label:v(b)("PAYOUT_DETAIL.LOGIN"),"min-width":"150",align:"left"},{default:i((({row:a})=>[r("div",ua,u(a.login),1)])),_:1},8,["label"]),c(E,{label:v(b)("PAYOUT_DETAIL.TYPE"),"min-width":"150",align:"left"},{default:i((({row:a})=>[r("div",va,u(a.typeStr||"Payout"),1)])),_:1},8,["label"]),c(E,{label:v(b)("PAYOUT_DETAIL.AMOUNT"),"min-width":"150",align:"right"},{default:i((({row:a})=>[r("div",Ta,u(a.amount),1)])),_:1},8,["label"]),c(E,{label:v(b)("PAYOUT_DETAIL.STATE"),"min-width":"200",align:"center"},{default:i((({row:a})=>[r("div",pa,[r("div",{class:O(["status",`status-${a.state}`])},u(a.stateStr),3)])])),_:1},8,["label"]),c(E,{label:v(b)("PAYOUT_DETAIL.CREATE_TIME"),"min-width":"250",align:"center"},{default:i((({row:a})=>[r("div",Aa,u(a.createTime),1)])),_:1},8,["label"]),c(E,{label:v(b)("PAYOUT_DETAIL.ACTION"),"min-width":"250",align:"center"},{default:i((({row:a})=>[0===a.type&&1===a.state?(o(),n(A,{key:0,link:"",type:"primary",onClick:e=>{return t=a,q.value=!0,void(z.value=t);var t}},{default:i((()=>[d(u(v(b)("ME.TRANSACTION_LIST.LABELS.BUTTONS")),1)])),_:2},1032,["onClick"])):f("",!0)])),_:1},8,["label"])])),_:1},8,["data"])),[[R,{show:x.value,background:"rgba(0, 0, 0, 0.7)"}]]),V.value.length>0?(o(),m("div",Ea,[c(C,{"current-page":M.value,"onUpdate:currentPage":e[0]||(e[0]=a=>M.value=a),"page-size":B.value,total:F.value,layout:"total, prev, pager, next",onCurrentChange:j,disabled:x.value},null,8,["current-page","page-size","total","disabled"])])):f("",!0)])])):f("",!0)]),c(ta,{open:q.value,"onUpdate:open":e[1]||(e[1]=a=>q.value=a),data:z.value},null,8,["open","data"]),c(N,{visible:W.value,"onUpdate:visible":e[2]||(e[2]=a=>W.value=a),title:v(b)("ME.PAY_OUT.PAYOUT_NOT_AVAILABLE.TITLE"),content:v(b)("ME.PAY_OUT.PAYOUT_NOT_AVAILABLE.DESCRIPTION"),confirmText:v(b)("ME.PAY_OUT.PAYOUT_NOT_AVAILABLE.PRIMARY_BUTTON_TEXT"),onConfirm:Q,onClose:X},null,8,["visible","title","content","confirmText"])],64)}}}),[["__scopeId","data-v-ca39041b"]]);export{_a as default};
