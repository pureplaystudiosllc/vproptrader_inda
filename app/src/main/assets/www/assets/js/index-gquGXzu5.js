import{Q as a,r as s,c as e,b as l,I as t,z as i,J as o,K as c,L as n,j as u,M as r,x as d,O as v,u as E,s as O,R as _,F as A,P as m,U as T}from"./vue-vendor-dpeM2kxB.js";import{_ as p,c as U,w as P,o as C,as as f,E as y,at as S,au as g,R as M}from"./main-UPGOfi6h.js";import{P as R}from"./PCPayoutConditions-BNXtkkdk.js";import"./utils-vendor-Bv3pXXA2.js";import"./vant-vendor-CCYRvjqt.js";import"./pdfh5-DcFc6bYW.js";const N={class:"request-payout"},Y={class:"request-payout-container"},h={class:"page-header"},b={class:"page-title"},L={class:"page-description"},I={class:"form-container"},k={class:"form-card"},V={class:"form-title"},q={class:"note-section"},D={class:"note-mark"},j={class:"note-list"},w={class:"note-item"},B={class:"note-item"},G={class:"note-item"},x={class:"note-item"},z={class:"account-selection"},H={class:"form-label"},F={class:"account-option"},Q={class:"account-login"},J={key:0,class:"available-cash"},K={class:"label"},W={class:"amount"},X={key:1,class:"account-status"},Z={key:0,class:"status-message"},$={class:"error-message"},aa={class:"reason-title"},sa={class:"conditions-container"},ea={key:1,class:"status-message success"},la={class:"success-message"},ta={class:"form-actions"},ia=p(Object.assign({name:"RequestPayout"},{__name:"index",setup(p){const ia=a(),{t:oa}=U(),ca=s(!1),na=s(!1),ua=s([]),ra=s(""),da=e((()=>ua.value.find((a=>a.login===ra.value)))),va=a=>a&&a.amount&&parseFloat(a.amount)>=50,Ea=e((()=>{const a=da.value;if(!a||!a.login)return!1;if(!a.payoutRequirementVO)return!0;const{safetyCushionSummary:s=!1,maxLossOverMaxProfit:e=!0,consistencySummary:l=!1}=a.payoutRequirementVO||{};return!0===s&&!1===e&&!0===l})),Oa=()=>{ia.back()},_a=async()=>{if(da.value)if(Ea.value){na.value=!0;try{await S({type:g.REWARD,login:da.value.login}),y.success(oa("ME.PAY_OUT.MESSAGES.SUCCESS")),ia.push({name:M.PC.PROP_TRADER_PAY_OUT,query:{refresh:Date.now()}})}catch(a){y.error(a.message||oa("ME.PAY_OUT.MESSAGES.ERROR"))}finally{na.value=!1}}else y.warning(oa("ME.PAY_OUT.MESSAGES.ACCOUNT_NOT_AVAILABLE"));else y.warning(oa("ME.PAY_OUT.MESSAGES.SELECT_ACCOUNT"))};return l((()=>{(async()=>{ca.value=!0;try{const a=await f();ua.value=a.data||[]}catch(a){y.error(a.message||oa("ME.PAY_OUT.MESSAGES.ERROR"))}finally{ca.value=!1}})()})),(a,s)=>{const e=t("el-icon"),l=t("el-option"),p=t("el-select"),U=t("el-button"),f=i("loading");return o(),c("div",N,[n("div",Y,[n("div",h,[n("h1",b,[u(e,{class:"title-icon back-icon",onClick:Oa},{default:r((()=>s[1]||(s[1]=[n("svg",{viewBox:"64 64 896 896",focusable:"false",width:"1em",height:"1em",fill:"currentColor"},[n("path",{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"})],-1)]))),_:1}),d(" "+v(E(oa)("PC.PROP_TRADER.PAY_OUT.REQUEST.TITLE")),1)]),n("p",L,v(E(oa)("ME.PAY_OUT.DESCRIPTION")),1)]),n("div",I,[n("div",k,[n("h2",V,v(E(oa)("ME.PAY_OUT.TRADING_ACCOUNT")),1),n("div",q,[n("div",D,v(E(oa)("ME.PAY_OUT.NOTE")),1),n("div",j,[n("div",w,"1."+v(E(oa)("ME.PAY_OUT.NOTE_1")),1),n("div",B,"2."+v(E(oa)("ME.PAY_OUT.NOTE_2")),1),n("div",G,"3."+v(E(oa)("ME.PAY_OUT.NOTE_3")),1),n("div",x,"4."+v(E(oa)("ME.PAY_OUT.NOTE_4")),1)])]),n("div",z,[n("div",H,[s[2]||(s[2]=n("span",{class:"required"},"*",-1)),d(" "+v(E(oa)("ME.PAY_OUT.CHOOSE_FUNDED_ACCOUNT_LOGIN_ID")),1)]),O((o(),_(p,{modelValue:ra.value,"onUpdate:modelValue":s[0]||(s[0]=a=>ra.value=a),placeholder:E(oa)("ME.PAY_OUT.SELECT_ACCOUNT"),class:"account-select",disabled:ca.value,clearable:""},{default:r((()=>[(o(!0),c(A,null,m(ua.value,(a=>(o(),_(l,{key:a.login,label:a.login,value:a.login,disabled:!va(a)},{default:r((()=>[n("div",F,[n("span",Q,v(a.login),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","placeholder","disabled"])),[[f,ca.value]])]),da.value?(o(),c("div",J,[n("div",K,v(E(oa)("ME.PAY_OUT.AVAILABLE_CASH")),1),n("div",W,v(da.value.amount||"-"),1)])):T("",!0),da.value?(o(),c("div",X,[Ea.value?(o(),c("div",ea,[n("div",la,[u(e,{class:"success-icon"},{default:r((()=>[u(E(C))])),_:1}),d(" "+v(E(oa)("ME.PAY_OUT.ACCOUNT_AVAILABLE")),1)])])):(o(),c("div",Z,[n("div",$,[u(e,{class:"error-icon"},{default:r((()=>[u(E(P))])),_:1}),d(" "+v(E(oa)("ME.PAY_OUT.ACCOUNT_NOT_AVAILABLE")),1)]),n("div",aa,v(E(oa)("ME.PAY_OUT.REASON")),1),n("div",sa,[da.value.payoutRequirementVO?(o(),_(R,{key:0,"payout-conditions":da.value.payoutRequirementVO,"hide-title":!0},null,8,["payout-conditions"])):T("",!0)])]))])):T("",!0),n("div",ta,[u(U,{size:"large",onClick:Oa},{default:r((()=>[d(v(E(oa)("BUTTONS.CANCEL")),1)])),_:1}),u(U,{type:"primary",size:"large",loading:na.value,disabled:!da.value||!Ea.value,onClick:_a},{default:r((()=>[d(v(E(oa)("BUTTONS.SUBMIT")),1)])),_:1},8,["loading","disabled"])])])])])])}}}),[["__scopeId","data-v-af063e52"]]);export{ia as default};
